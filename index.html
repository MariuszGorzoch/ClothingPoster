<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="MoniTTa.jpg" rel="apple-touch-icon"/>
<title>Clothing Poster app</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#1173d4",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                    },
                    fontFamily: {
                        "display": ["Manrope"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
  </head>
<body class="bg-background-light dark:bg-background-dark font-display">
<div class="flex flex-col h-screen justify-between">
<div class="flex-grow overflow-y-auto">
<header class="sticky top-0 bg-background-light dark:bg-background-dark/80 backdrop-blur-sm z-10 px-4 pt-6 pb-4">
<div class="flex items-center justify-between">
<h1 class="text-2xl font-bold text-black dark:text-white">Products</h1>
</div>
</header>
<main class="px-4 pb-4">
<div class="space-y-3" id="product-list" role="list"></div>
</main>
</div>
<footer class="sticky bottom-0 bg-background-light dark:bg-background-dark/80 backdrop-blur-sm border-t border-black/10 dark:border-white/10">
<nav class="flex justify-around items-center h-16">
      <a class="flex flex-col items-center gap-1 text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors" href="add.html">
        <svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208Zm-32-80a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"></path>
        </svg>
        <span class="text-xs font-medium">Create</span>
      </a>
      <a class="flex flex-col items-center gap-1 text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors" href="vintage.html">
        <svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M216,80H152V40a16,16,0,0,0-16-16H40A16,16,0,0,0,24,40V200a16,16,0,0,0,16,16h80a8,8,0,0,0,0-16H40V40H136V80a16,16,0,0,0,16,16h64v16h0l0,27.09a8,8,0,0,0,16,0L232,96A16,16,0,0,0,216,80Zm-24,80H152a16,16,0,0,0-16,16v56a8,8,0,0,0,13.66,5.66L168,216.57l18.34,21.09A8,8,0,0,0,200,232V176A16,16,0,0,0,192,160Zm-8,60.69-10.34-11.89a8,8,0,0,0-12,0L152,220.69V176h32Z"></path>
        </svg>
        <span class="text-xs font-medium">Import</span>
      </a>
<button class="flex flex-col items-center gap-1 text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors" id="refresh-products" type="button">
<svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M229.66,165.66a8,8,0,0,1-11.32,0L200,147.31A72,72,0,1,1,208,128a8,8,0,0,1-16,0,56,56,0,1,0-16.27,39.6l-18.63-18.62a8,8,0,0,1,5.65-13.65H224a8,8,0,0,1,8,8v60.69a8,8,0,0,1-13.66,5.64ZM64,128a8,8,0,0,1,16,0,56,56,0,1,0,16.27-39.6l18.63,18.62A8,8,0,0,1,109.25,120H32a8,8,0,0,1-8-8V51.31A8,8,0,0,1,37.66,45.66L56,64A72,72,0,1,1,48,128Z"></path>
</svg>
<span class="text-xs font-medium">Refresh</span>
</button>
<a class="flex flex-col items-center gap-1 text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors" href="jobs.html">
<svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M208,68H176V56a24,24,0,0,0-24-24H104A24,24,0,0,0,80,56V68H48A20,20,0,0,0,28,88V192a16,16,0,0,0,16,16H212a16,16,0,0,0,16-16V88A20,20,0,0,0,208,68ZM96,56a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8V68H96Zm120,40v20H168a40,40,0,0,1-80,0H40V96a4,4,0,0,1,4-4H212A4,4,0,0,1,216,96Zm-40,36H80a24,24,0,0,0,48,0h0A24,24,0,0,0,176,132ZM212,192H44a0,0,0,0,1,0,0V140H77.06a40,40,0,0,0,101.88,0H212v52A0,0,0,0,1,212,192Z"></path>
</svg>
<span class="text-xs font-medium">Jobs</span>
</a>
<a class="flex flex-col items-center gap-1 text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors" href="#">
<svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"></path>
</svg>
<span class="text-xs font-medium">Settings</span>
</a>
</nav>
<div class="pb-safe"></div>
</footer>
</div>

</div>

<script>
  const productListElement = document.getElementById("product-list");

  function renderProductCard(product) {
    const card = document.createElement("div");
    card.className = [
      "p-3",
      "rounded-lg",
      "flex",
      "items-center",
      "gap-4",
      "transition-colors",
      "border",
      "border-transparent",
      "bg-white",
      "dark:bg-background-dark/50",
      "hover:bg-primary/5",
      "hover:border-primary/40",
      "cursor-pointer",
    ].join(" ");
    card.setAttribute(
      "aria-label",
      `Manage product ${product.Attributes?.Title ?? "Untitled"}`
    );
    card.tabIndex = 0;
    const productId = product?.Id ?? "";
    const handleNavigation = () => {
      if (!productId) {
        return;
      }

      window.location.href = `manage.html?productId=${encodeURIComponent(productId)}`;
    };
    card.addEventListener("click", handleNavigation);
    card.addEventListener("keydown", (event) => {
      if (event.key === "Enter" || event.key === " ") {
        event.preventDefault();
        handleNavigation();
      }
    });
    const imageUrl = Array.isArray(product.Images) && product.Images.length > 0 ? product.Images[0] : "";
    const image = document.createElement("div");
    image.className = "bg-center bg-no-repeat aspect-square bg-cover rounded size-16 flex-shrink-0";
    if (imageUrl) {
      image.style.backgroundImage = `url("${imageUrl}")`;
    } else {
      image.classList.add("bg-black/10", "dark:bg-white/10");
    }

    const body = document.createElement("div");
    body.className = "flex flex-1 items-center gap-4";

    const content = document.createElement("div");
    content.className = "flex-1";

    const title = document.createElement("p");
    title.className = "text-black dark:text-white font-semibold";
    title.textContent = product.Attributes?.Title ?? "Untitled";

    content.appendChild(title);

    card.appendChild(image);
    body.appendChild(content);

    card.appendChild(body);

    return card;
  }

  function renderError(message) {
    const errorCard = document.createElement("div");
    errorCard.className = "bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-200 p-4 rounded-lg";
    errorCard.textContent = message;
    productListElement.innerHTML = "";
    productListElement.appendChild(errorCard);
  }

  async function loadProducts() {
    try {
      productListElement.innerHTML = "";
      const response = await fetch("https://clothingposterappservice-ada8b4eahpfxbrd6.polandcentral-01.azurewebsites.net/products");
      if (!response.ok) {
        throw new Error(`Failed to load products (${response.status})`);
      }

      const products = await response.json();
      if (!Array.isArray(products) || products.length === 0) {
        const emptyCard = document.createElement("div");
        emptyCard.className = "bg-white dark:bg-background-dark/50 p-4 rounded-lg text-gray-500 dark:text-gray-400";
        emptyCard.textContent = "No products available.";
        productListElement.appendChild(emptyCard);
        return;
      }

      products.forEach((product) => {
        const card = renderProductCard(product);
        productListElement.appendChild(card);
      });
    } catch (error) {
      renderError("Unable to load products. Please try again later.");
      console.error("Error loading products", error);
    }
  }

  const refreshButton = document.getElementById("refresh-products");
  if (refreshButton) {
    refreshButton.addEventListener("click", () => {
      loadProducts();
    });
  }

  loadProducts();
</script>
</body></html>